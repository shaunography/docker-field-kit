FROM python:3.7-slim-buster

EXPOSE 8000
ENV AWS_DEFAULT_REGION=eu-west-1 

RUN apt update \
	&& apt-get install -y \
		build-essential \
		autoconf \
		automake \
		libtool \
		python3.7-dev \
		python3-tk \
		jq \
		awscli
#RUN apt-get install -y bash

RUN pip install --upgrade pip setuptools wheel
RUN pip install PEP517

COPY ./cloudmapper .
COPY ./audit.sh .

RUN python -m pip install -r requirements.txt

ENTRYPOINT ["python", "cloudmapper.py"]
